import org.gradle.internal.os.OperatingSystem

task buildDocker(type: Exec) {
    doFirst {
        copy {
            from projectDir
            into "build/docker/"
            include "*.yml"
        }
        copy {
            from projectDir
            into "build/docker/"
            include "Dockerfile"
        }
        copy {
            from projectDir
            into "build/docker/"
            include "waiting.sh"
        }
        copy {
            from "build/libs"
            into "build/docker/"
            include "*.war*"
        }
    }
    commandLine 'docker', 'image', 'build', '-f', 'build/docker/Dockerfile', '-t', 'myapp', 'build/docker/'
}
